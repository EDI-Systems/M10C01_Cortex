Hardware Sharing
   --Generic virtualization
   Generic virtualization是一种广泛应用与计算资源管理的技术，通过创建计算机资源的虚拟版本，来提高资源利用效率、灵活性和可管理性。这项技术使不同的虚拟资源可以在同一个物理硬件上运行，从而实现资源共享、隔离和动态分配。
   按应用场景进行分类：
   1.服务器虚拟化：在一台物理服务器上运行多个虚拟机，常用于数据中心和云计算环境
   例子：VMware ESXi、Microsoft Hyper-V、KVM
   2.桌面虚拟化：将桌面环境虚拟化，使用户可以远程访问虚拟桌面
   例子：VMware Horizon、Citrix Virtual Apps and Desktops
   3.存储虚拟化：将物理存储资源抽象为虚拟存储池，以提高存储资源的利用率和管理效率。
   例子：IBM Spectrum Virtualize、VMware vSAN
   4.网络虚拟化：抽象网络资源，实现灵活的网络配置和管理
   例子：VMware NSX、Cisco ACI
   Generic virtualization应用场景：
   主要包括企业级应用、云计算服务、大数据处理、人工智能等领域。随着企业数字化转型的加速，虚拟化技术的市场需求不断增长。
   目前主流虚拟化厂商：https://blog.51cto.com/alistine/1712793
   1.Vmware：
   虚拟化技术的领头羊，将虚拟化技术带到了X86平台，为云计算发展起到了催化剂作用，虚拟化建立在文件层面上。产品线主要是服务器虚拟化（vSphere 5）和桌面虚拟化（View），应用虚拟化（Thinapp，很不成熟）。
   产品介绍：
   vmware workstation：使多个虚拟机在同一个宿主机中运行
   https://zh.wikipedia.org/wiki/VMware_Workstation
   VMware Workstation是VMware公司销售的运行于台式机和工作站上的虚拟化软件，也是VMware公司第一个面市的产品（1999年5月）。该产品最早采用了VMware在业界知名的二进制翻译技术，在x86 CPU硬件虚拟化技术还未出现之前，为客户提供了纯粹的基于软件的全虚拟化解决方案。
https://blog.csdn.net/weixin_56416078/article/details/124163609
   桌面虚拟化软件，适用于个人用户、开发人员和测试人员；支持多种主流操作系统，支持跨平台；在   将MAC地址用作唯一识别标记的环境中时需为每个虚拟机手工配置MAC地址；
https://www.utheme.cn/code/31297.html
   Vmware esxi：企业级类型 I（type-1）Hypervisor，用于硬件虚拟化
   它是专为运行虚拟机、最大限度降低配置要求和简化部署而设计；通过直接访问并控制底层资源，   ESXi能有效地对硬件进行分区，以便整合应用并降低成本。
https://zh.wikipedia.org/wiki/VMware_ESXi
https://blog.csdn.net/weixin_45311714/article/details/126773334
   VMware Horizon：是一种虚拟桌面基础结构（VDI）产品，可为最终用户提供虚拟桌面和已发布的应用程序。
https://www.azurew.com/vmware/horizon-7/3647.html
   VMware vSAN：一款软件定义的企业存储解决方案，支持超融合基础架构（HCL）系统；基于服务器端存储的共享分布式对象存储系统，可取代vSphere（用于构建云计算基础的虚拟化平台）后端的外置磁盘阵列
http://njlanhome.com/solve/537.html
      优点：
      （1） 提供高效的虚拟化解决方案，能够为虚拟机提供接近原生的性能；
      （2）VMware 拥有多年的开发和优化经验，其产品经过广泛的企业测试，具有高度的稳定性和可靠性；
      （3）具有丰富的功能集，如 vMotion（虚拟机热迁移）、DRS（分布式资源调度）、HA（高可用性）、FT（容错）等，可以大大提高数据中心的灵活性和可用性；
      （4）广泛的硬件和软件兼容性：
      （5）易于管理；
      （6）具有多层次的安全机制，包括虚拟网络隔离、数据加密、安全补丁管理等，确保虚拟环境的安全性；
       缺点：
      （1）VMware 的虚拟化解决方案价格较高，尤其是对于小型企业和个人用户而言，许可费用和维护成本可能是一个显著的负担；
      （2）许多高级功能的设置和管理可能需要较高技术水平，对初学者较为困难；
      （3）在资源紧张的情况下，虚拟化可能会影响系统的整体性能；
      （4）由于 VMware 的一些高级功能和管理工具是专有的，用户可能会受到一定程度的供应商锁定，迁移到其他虚拟化平台可能会面临一些挑战和困难；
   2.Microsoft
   Microsoft虚拟化是多元的虚拟化，最大的优势在于与操作系统紧密结合，其虚拟化是直接访问硬件，建立在硬件层面的虚拟化，主要覆盖了服务器虚拟化（Hyper-V）、桌面虚拟化（RDS,MDOP)、表现层虚拟化和应用虚拟化（App-V）四个方面，相对而言服务器虚拟化优势最大。
   产品介绍：
   服务器虚拟化包括Hyper-V、Hyper-V server2012，virtual server
   桌面虚拟化：virtual PC
   应用虚拟化：收购的softGrid Application Virtualization
   Microsoft Hyper-V：在服务器虚拟化和大规模数据中心环境中表现突出；适用于大型企业和云计算平台；设计的目的是为广泛的用户提供更为熟悉及成本效益更高的虚拟化基础设施软件，这样可以降低运作成本、提高硬件利用率、优化基础设施并提高服务器的可用性。  Hyper-V的设计借鉴了Xen，采用微内核的架构，兼顾了安全性和性能的要求。
        优点：
      （1）集成性强，可以与 Windows 环境、Azure无缝集成；
      （2）提供了如Hyper-V Manager和 System Center Virtual Machine Manager (SCVMM)等管理工具，方便用户管理虚拟机、监控性能、分配资源等；
      （3）Hyper-V 包含在 Windows Server 许可证中，对于已经购买 Windows Server 的企业来说，不需要额外支付虚拟化软件费用；Hyper-V Server 是一个免费的虚拟化平台，虽然功能有限，但足以满足许多基本虚拟化需求；
      （4）具有广泛的兼容性，支持多种操作系统，且与众多硬件制造商合作，确保广泛的硬件兼容性；
安全性：
      （5）Hyper-V 提供了多种安全功能，如虚拟机隔离、受保护虚拟机、虚拟 TPM 等，确保虚拟环境的安全性；
      （6）提供定期的安全更新和技术支持，保障虚拟化环境的持续安全和稳定。
        缺点：
      （1）虽然 Hyper-V 的性能在大多数场景下足够，但在极端高负载和高性能需求的环境下，可能不如 VMware 等其他专业虚拟化平台；
      （2）一些高级虚拟化功能（如实时迁移、多路径 I/O 等）在 Hyper-V 中可能没有其他平台实现得那么灵活和高效。
      （3）对于不熟悉 Windows Server 环境的管理员来说，学习和配置 Hyper-V 可能需要一定的时间和精力；
      （4）在某些高级功能上可能不如VMware解决方案全面；
      （5）虽然 Hyper-V 支持许多操作系统，但某些第三方软件和工具可能对 VMware 平台有更好的支持和优化；
https://www.utheme.cn/code/31297.html
   3.Citrix
   Citrix得益于云计算的兴起，增长非常快。使用操作系统的虚拟化技术，且同微软在很多方面都有合作。
   产品介绍：
   服务器虚拟化：XenServer	便宜，管理一般，是经过云验证的企业级虚拟化产品
   应用虚拟化：XennAPP
   桌面虚拟化：Xendesktop
   优点：
   （1）支持集中管理和部署大量虚拟桌面和应用程序；Citrix HDX 技术能够优化用户的远程访问体验，提供高质量的视频、音频和图形性能，即使在低带宽条件下也能保证良好的用户体验；
   （2）提供强大的集中管理控制台，方便管理员管理和监控整个虚拟化环境，简化了部署和维护工作；
   （3）提供了多层次的安全功能，包括数据加密、多因素认证和防火墙集成，保护敏感数据免受未经授权的访问；
   （4）虚拟桌面和应用程序运行在隔离的环境中，减少了潜在的安全风险；
   （5）支持多种操作系统；具有设备无关系；且提供共享会话功能，支持用户之间的协作和共同工作，提高了团队的生产力；
   缺点：
   （1）成本高；
   （2）需要强大的硬件支持；
   （3）部署和配置较为复杂，管理大规模虚拟环境较为困难；
   （4）存在一定的资源开销；
   （5）受到一定程度的供应商锁定效应：
   VMware在虚拟化技术领域拥有深厚的技术积累和广泛的市场认可度；Microsoft则凭借其操作系统的优势，在桌面虚拟化市场占据一定份额；Citrix则以远程桌面协议（RDP）为基础，提供高效的远程桌面解决方案。
https://developer.baidu.com/article/details/3111924
   --Cloud gaming providers
   云游戏提供商则是指专门提供基于云计算技术的游戏服务的公司或平台。云游戏提供商通过利用云计算技术，为用户提供了一种灵活、便捷且跨设备的游戏体验方式，用户可以通过互联网玩游戏，而无需高端的游戏硬件。游戏不是在个人电脑或游戏机上本地运行，而是在远程服务器上执行，并流式传输到用户设备。
   主要云游戏提供商：
   1.NVIDIA GeForce Now：允许用户从Steam、Epic Games Store等平台流式传输他们现有的游戏库；全球数据中心，使用高性能NVIDIA GPU；采用低延迟网络连接，使用边缘计算技术；使用H.265视频编码标准；自适应比特率；
   2.Boosteroid：一个欧洲的云游戏服务，支持各种游戏，允许用户在各种设备上玩这些游戏
   3.Microsoft Xbox Cloud Gaming（前称Project xCloud）：作为Xbox Game Pass Ultimate的一部分，使用户能够将大量Xbox游戏流式传输到各种设备上；基于微软的Azure云服务，拥有全球数据中心；采用高带宽低延迟网络，并结合边缘计算技术；使用H.265和自适应比特率技术。
   国内主要云游戏提供平台：
   1.腾讯先锋
   腾讯先锋是腾讯官方推出的云游戏平台，以其自研技术能力和多端互通的云游戏体验，收获了一批忠实用户。平台支持QQ、微信账号一键登录，已上架超过120款正版精品云游戏，比如王者荣耀、英雄联盟手游等等。
   2.网易云游戏
   上线于2019年，凭借网易在游戏领域的深厚积累，为玩家提供超过250款PC游戏和500款手游的选择。该平台提供无限时间、多平台支持、免下载等功能，用户可以轻松畅玩各种游戏。与此同时，网易云游戏仅提供网易旗下的游戏，对游戏的丰富度上有一定的局限性。
   3.易云咖云游戏
   免账号游玩的游戏很多，一共555款游戏。是由用户上传的共享账号，因此规避了版权风险；每天签到在线可以固定白嫖；延迟大概是在20到30之间左右，比较稳定，在整个游戏过程中比较流畅，画质高清可以调节；自带加速器；资费是标准会员每月13元，高级会员平均每月33元。
   4.start
   腾讯的云游戏平台，有Mac、PC、安卓TV，但目前没有iOS版和网页端。每次登录和做任务领取游戏时长，但游戏很少，只有65款。该平台玩腾讯游戏延迟很低，只适合玩腾讯全家桶的人；资费包年是251，包月29.
   5.青椒云
   青椒云其实是云电脑平台，但也提供了云游戏的服务，用户无需高性能硬件即可通过不同设备享受游戏。它的优势包括跨平台访问、即时更新以及节省本地存储空间。然而，青椒云主要面对的是企业用户和办公用户，所以游戏配备软件较少，更多的是用来做设计或影视行业的云电脑。
   6.顺网云
   顺网云是专门做游戏云电脑的平台，云端计算能力突出，并且配备了千款游戏和自动更新功能，玩家无需担心本地硬件的性能限制，登录账号即可开玩；配置比较高，延迟较低，游戏比较全、游戏全覆盖、自带加速器。但在用户反馈中，顺网云也存在一些潜在的不足，如十分考验用户的本地网络连接速度，当网络条件不佳时，延迟度过高，非常影响用户游戏体验；并且资费分为周期卡和时尚卡，平均每小时三元左右，如果长期使用费用较高，更适合用户应急使用。
   7.米哈云游
   它是米哈游旗下的云游戏平台，在实时云端技术上表现较好。用上米哈云游，无需下载游戏本体即可打开米哈游的游戏，为玩家提供了低延迟、高画质、高帧率的游戏体验。该平台以原神云游戏版本广受欢迎。
https://baijiahao.baidu.com/s?id=1803438933276293278&wfr=spider&for=pc
https://zhuanlan.zhihu.com/p/585042557
   --GPU virtualization
   1.GPU virtualization允许多个虚拟机(VM)或容器共享一块物理图形处理单元（GPU）。其主要目标是提高资源利用率和灵活性，同时保持性能。它使得不同的虚拟机或容器能够通过软件隔离和管理，共享同一块GPU，而不会相互干扰或导致冲突。该技术在提升数据中心效率、降低成本、增强安全性和灵活性方面具有显著的优势，是云计算和企业IT基础设施中不可或缺的一部分。
   目前流行的商用GPU virtualization方案可以分为：
   https://developer.aliyun.com/article/599189
   1.GPU 直通模式：
   最早采用最成熟；Nvidia Tesla、AMD FirePro、Intel Gen8/Gen9都有支持；
   相对于任何其他设备来说，有额外的PCL配置空间模拟和MMIO的拦截；依赖IOMMU;
   直通模式是对比物理机性能损耗最小，硬件驱动无需修改的方案，被各大公用云厂商广泛采用。对于支持直通的GPU而言，直通模式没有对可支持的GPU数量做限制，也没有对GPU功能性做阉割。GPU厂家的绝大多数新功能可以在直通模式下无修改地支持。
   性能损耗最小；功能兼容性好；技术简单，运维成本低，对GPU厂商没有依赖；
   不支持热迁移（GPU硬件研发属于厂家核心竞争力，实现热迁移需要GPU硬件厂商协助）；不支持GPU资源分割；监控缺失（虚拟机直接访问GPU硬件，宿主机上只有一个Pseudo PCL驱动，无法拿到有效信息）；
   2.GPU SRIOV模式：
   AMD S7150, AMD M125；
   SRIOV的本质是把一个PCI卡资源（PF）拆分成多个小份（VF），这些VF依然是符合PCI规范的endpoint设备。由于VF都带有自己的Bus/Slot/Function号，IOMMU/VTD在收到这些VF的DMA请求的过程中可以顺利查找IOMMU2ndTranslation Table从而实现GPA到HPA的地址转换；VF调度采用分时复用；
   安全性上SRIOV>半虚拟化（SRIOV多了一层IOMMU地址访问保护）；
   在Scalable（可扩展性）方面没有优势；
   3.GPU 分片虚拟化（mediated passthrough）：
   Intel GVT-g和Nvidia GRID vGPU；
   分片：对GPU在时间片段上划分；对GPU资源划分；
   基于VFIO mediated passthrough framework的GPU虚拟化方案。该方案由NVIDIA提出，并联合Intel一起提交到了Linux kernel 4.10代码库，该方案的kernel部分代码简称mdev模块；
   把会影响性能的访问直接passthrough给虚拟机，把性能无关，功能性的MMIO访问做拦截并在mdev模块内做模拟；不依赖IOMMU；在宿主机端实现地址转换和安全检查；
   GVT-g：基于Intel的集成显卡，所以对运行环境的硬件要求非常低；完全免费；广泛应用于XenClient，ARCN等；对本地显式良好支持；对media decoding/encoding支持；但本身GPU性能无法与AMD/NVIDIA同类产品竞争；基于集成显卡，无法做到一机多卡，无法实现高密度运用；
   4.GPU全虚拟化：
   VMWare的vSGA；
   vSGA可以用安装在ESXi主机上的物理显卡（或者称为GPU）为多个虚拟机提供硬件图形加速。
   允许在多个虚拟机共享主机上的GPU显卡；安装简单；支持vMotion；
   可能需要重新认证应用程序才能受支持（因为虚拟机上显示出来的显卡类型不是nVidia的）；API支持受到限制；OpenGL和DirectX版本的支持受到限制；每个虚拟机最多能分配512M显存；
https://blog.csdn.net/petrosofts/article/details/110129676
   5.Virtio GPU：
   尚未成熟
   --Netcafe diskless environments
   Netcafe diskless environments指网咖无盘环境，客户端计算机通常不具备本地硬盘，而是通过网络从服务器上获取操作系统和应用程序。数据通过光纤通道进行传输，速度更快，可以提高网吧的运行效率；所有数据和软件更新都由中央管理，可以显著降低维护成本，提高安全性，并且易于管理。
   目前国内较为常见的商业无盘品牌：
   锐起、网众、MZD/PXD、奇东锐腾、VND协志、DOL、EZDisk等

   从上表可以看出，三者的市场定位和覆盖地区还是有很大差异的，而且都有自己的独有的市场特点。
   1.网众NXD价格适中，但是技术服务上受linux需要专业技术员维护的限制，影响整体服务体系和质量。
   2.锐起XP是知名度较高的无盘软件，但是最大的问题是盗版猖獗，严重影响了市场秩序，目前主要是小型网吧使用盗版锐起居多，根本谈不上售后服务。
   3.斯普林MZD无盘价格较贵，市场定位主要是针对160台以上的大中型网吧，并且有自己关联的度身定制的服务器、交换机、防火墙、工作站、网管软件，纯千兆方案成熟稳定，属于无盘界中的高档产品，适合有经济实力大中型网吧和连锁网吧。
https://m.5636.com/netbar/article/arc/4262
   --Transcendental memory
   在Linux内核中，优化固定内存（RAM）的管理是一个早已解决的问题。然而，在虚拟环境中优化RAM的管理仍然充满挑战，因为每个客户机内核只关注优化其自身分配的固定RAM，而忽略了其他客户机的需求。此外，虚拟机管理器（VMM）暴露的信息很少，难以决定哪个客户机需要更多的RAM。诸如内存气球（ballooning）和热插拔内存（hot-plug memory）等机制可以从自私的客户机那里获取RAM并分配给需要的客户机，但这些机制存在显著的问题，且无法解决最根本的问题：哪些客户机是自私的，哪些是需要的？
超验记忆（Transcendent Memory，简称tmem）是一种优化虚拟环境中RAM利用率的新方法。每个客户机未充分利用的RAM，加上未分配给任何客户机的RAM（闲置内存），被收集到一个中央池中。然后通过VMM提供的精心设计的基于页面复制的接口，间接访问这些RAM。
   优点：
   （1）虽然需要对Linux内核进行一些更改，但这些更改相对较小，易于实现；
   （2）不仅为VMM提供了有价值的信息，还为内核提供了额外的“魔法”内存，更有效利用未使用的内存资源，减少内存浪费；
   （3）减少了I/O，缓解了一些由内存气球和热插拔引起的问题；
   缺点：
   （1）修改需要VMM和客户机内核的支持和配合；
   （2）内存访问的间接性会引入一些性能开销；
Transcendent Memory and Linux
Dan Magenheimer, Chris Mason, Dave McCracken, Kurt Hackel Oracle Corp

   --Memory balloons
   Memory balloons（内存气球）是一种在虚拟化环境中用于管理和优化内存资源分配的技术。它通过在虚拟机（VM）和宿主机之间动态调整内存分配，以优化整体性能和资源利用率。具体来说，内存气球技术允许宿主机从虚拟机中“充气”或“放气”，即根据需要将内存分配给虚拟机或从虚拟机中释放内存，以便将资源重新分配给其他虚拟机或宿主系统。内存气球位于虚拟机中，内存气球 “膨胀” 则是虚拟机将内存释放给宿主机，内存气球 “压缩” 则是宿主机将内存还给虚拟机。
   由于物理和虚拟资产都需要内存资源，因此需要以多种方式声明、释放和回收内存。内存气球是为了使虚拟机内存能够扩展的技术，从而可使系统在需要时为特定虚拟机提供更多内存。内存气球在虚拟化管理程序中工作，常用于虚拟化平台：VMware ESXi、Microsoft Hyper-V和KVM（开源）
   优点：资源优化；提高内存可用性；降低成本，不需部署更多物理服务器或分配更多物理内存
   缺点：气球驱动程序可能占用太多内存，以至于管理程序缺乏在性能最佳时运行所需全部资源；多个虚拟机同时请求气球内存，可能降低系统整体性能；内存过度碎片化；一些虚拟机可能会试图保留更多内存而不积极参与释放内存，导致内存分配不均；
   Memory balloons VS Transcendent Memory
   （1）内存气球在动态内存调配方面较为灵活，但可能引入更多性能开销；
            超验记忆通过集中池管理和间接访问，提供了更高效的内存利用方式，但实现较为复杂；
   （2）内存气球频繁调整内存时可能影响性能；
            超验记忆通过减少I/O需求和提供额外内存缓冲来提升性能；
   （3）内存气球需要在每个虚拟机中运行驱动程序；
            超验记忆需对VMM和客户机内核进行一些修改；
https://m.elecfans.com/article/1115488.html
